<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard VITA</title>
  <link rel="stylesheet" href="../css/painel.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="shortcut icon" type="image/png" href="../logos/coracao-logo.png"> 
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="lateral">
        <img class="logo" src="../assets/logo.png" alt="Vita Logo">
        <div class="hello">
            <h3> Bem vindo! </h3>
        </div>
        <nav>
            <a href="./imc.html"><i class="fas fa-map"></i>Mapa IMC</a>
            <a href="./dash.html"><i class="fa-solid fa-chart-bar"></i> Dashboard</a>
            <a href="../index.html" class="sair" onclick="limparSessao()"><i class="fa-solid fa-right-from-bracket"></i>Sair</a>
        </nav>
    </div>
    <button class="menu-toggle" onclick="toggleMenu()">☰ Menu</button>
<section class="main">
  <div class="kpi-container">
    <div class="kpi-card"><div><h3>Maior IMC</h3><p id="maior-imc">45</p></div></div>
    <div class="kpi-card"><div><h3>Maior Fator</h3><p id="menor-imc">Sedentarismo</p></div></div>
    <div class="kpi-card"><div><h3>IMC Nacional</h3><p id="imc-nacional">28</p></div></div>
    <div class="kpi-card"><div><h3>% Obesidade</h3><p id="obesidade">25</p></div></div>
    <div class="kpi-card"><div><h3>% Sobrepeso</h3><p id="sobrepeso">38</p></div></div>
  </div>
  <div class="botoes-barra">
    <select id="select-estado">
      <option value="" disabled selected>Selecione um Estado</option>
      <option value="AC">Acre</option>
      <option value="AL">Alagoas</option>
      <option value="AP">Amapá</option>
      <option value="AM">Amazonas</option>
      <option value="BA">Bahia</option>
      <option value="CE">Ceará</option>
      <option value="DF">Distrito Federal</option>
      <option value="ES">Espírito Santo</option>
      <option value="GO">Goiás</option>
      <option value="MA">Maranhão</option>
      <option value="MT">Mato Grosso</option>
      <option value="MS">Mato Grosso do Sul</option>
      <option value="MG">Minas Gerais</option>
      <option value="PA">Pará</option>
      <option value="PB">Paraíba</option>
      <option value="PR">Paraná</option>
      <option value="PE">Pernambuco</option>
      <option value="PI">Piauí</option>
      <option value="RJ">Rio de Janeiro</option>
      <option value="RN">Rio Grande do Norte</option>
      <option value="RS">Rio Grande do Sul</option>
      <option value="RO">Rondônia</option>
      <option value="RR">Roraima</option>
      <option value="SC">Santa Catarina</option>
      <option value="SP">São Paulo</option>
      <option value="SE">Sergipe</option>
      <option value="TO">Tocantins</option>
    </select>          
    <button onclick="filtrarPorEstado()">Filtrar Estado</button>
    <!-- <button onclick="alternarCategorias()">Alternar Categorias</button> -->
    <button onclick="mostrarAgravantesCombinados()">Vários Agravantes</button>
  </div>

  <div class="chart-container">
    <div class="chart-box-doughnut">
      <canvas id="grafico-sexo"></canvas>
    </div>

    <div class="chart-box">
      <canvas id="grafico-faixa-etaria"></canvas>
    </div>

    <div class="chart-box" id="barra">
      <canvas id="grafico-influenciadores"></canvas>
    </div>
    
</section>
  <script>
  function toggleMenu() {
    const sidebar = document.querySelector('.lateral');
    const body = document.body;
    sidebar.classList.toggle('active');
    body.classList.toggle('menu-open');
  }

   const ctxSexo = document.getElementById('grafico-sexo').getContext('2d');
   const graficoSexo = new Chart(ctxSexo, {
   type: 'doughnut',
    data: {
    labels: ['Mulheres', 'Homens', 'transexuais', 'Outros'],
      datasets: [{
        data: [55, 42, 2, 1],
        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#00FA9A']
      }]
    },
    options: {
      responsive: true,
      plugins: {
        title: {
         display: true,
          text: 'Obesidade por Sexo',
           color: '#2e2e2e',
                font: {
                    size: 24
         }
       }
     }
    }
  });

   const ctxIdade = document.getElementById('grafico-faixa-etaria').getContext('2d');
    const graficoIdade = new Chart(ctxIdade, {
    type: 'bar',
    data: {
      labels: ['0-19', '20-39', '40-59', '60+'],
      datasets: [{
        label: 'Obesidade (%)',
        color: '#2e2e2e',
                font: {
                    size: 20
                },
        data: [10, 25, 40, 30],
        backgroundColor: ['#4BC0C0', '#FF9F40', '#9966FF', '#FF6384']
    }]
  },
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
        text: 'Obesidade por Faixa Etária',
        color: '#2e2e2e',
                font: {
                    size: 20
                },
      },
      legend: {
        display: false
      }
    },
    scales: {
      y: {
        beginAtZero: true,
        title: {
          display: true,
          text: 'Porcentagem (%)'
        }
      },
      x: {
        title: {
          display: true,
          text: 'Faixa Etária'
        }
      }
    }
  }
});

  const ctxInfluenciadores = document.getElementById('grafico-influenciadores').getContext('2d');
  const graficoInfluenciadores = new Chart(ctxInfluenciadores, {
  type: 'line',
  data: {
    labels: ['2018', '2019', '2020', '2021', '2022', '2023'],
    datasets: [
      {
        label: 'Sedentarismo',
        data: [30, 32, 35, 38, 37, 40],
        borderColor: '#FF6384',
        backgroundColor: 'rgba(255, 99, 132, 0.2)',
        tension: 0.4
      },
      {
        label: 'Alimentação Inadequada',
        data: [25, 27, 28, 29, 30, 33],
        borderColor: '#36A2EB',
        backgroundColor: 'rgba(54, 162, 235, 0.2)',
        tension: 0.4
      },
      {
        label: 'Estresse',
        data: [15, 18, 22, 25, 24, 26],
        borderColor: '#FFCE56',
        backgroundColor: 'rgba(255, 206, 86, 0.2)',
        tension: 0.4
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      title: {
        display: true,
        text: 'Influenciadores Externos da Obesidade',
        color: '#2e2e2e',
                font: {
                    size: 20
                },
      },
      legend: {
        position: 'top'
      }
    },
    scales: {
      y: {
        beginAtZero: true,
        title: {
          display: true,
          text: 'Porcentagem (%)'
        }
      },
      x: {
        title: {
          display: true,
          text: 'Ano'
        }
      }
    }
  }
});

const dadosSexo = {
  AC: [60, 35, 4, 1],
  AL: [58, 38, 3, 1],
  AP: [55, 40, 4, 1],
  AM: [59, 36, 3, 2],
  BA: [63, 33, 3, 1],
  CE: [62, 34, 3, 1],
  DF: [56, 39, 3, 2],
  ES: [58, 37, 3, 2],
  GO: [59, 36, 4, 1],
  MA: [61, 34, 3, 2],
  MT: [60, 35, 3, 2],
  MS: [58, 37, 3, 2],
  MG: [59, 36, 3, 2],
  PA: [62, 33, 3, 2],
  PB: [60, 35, 4, 1],
  PR: [57, 38, 3, 2],
  PE: [61, 34, 3, 2],
  PI: [59, 36, 3, 2],
  RJ: [56, 39, 3, 2],
  RN: [60, 35, 3, 2],
  RS: [57, 38, 3, 2],
  RO: [59, 36, 3, 2],
  RR: [55, 40, 3, 2],
  SC: [58, 37, 3, 2],
  SE: [60, 35, 3, 2],
  SP: [59, 36, 3, 2],
  TO: [58, 37, 3, 2]
};

const dadosFaixaEtaria = {
  AC: [15, 35, 30, 20],
  AL: [17, 34, 29, 20],
  AP: [14, 32, 30, 24],
  AM: [16, 34, 31, 19],
  BA: [20, 36, 28, 16],
  CE: [19, 35, 30, 16],
  DF: [15, 33, 31, 21],
  ES: [17, 34, 29, 20],
  GO: [18, 34, 30, 18],
  MA: [20, 36, 28, 16],
  MT: [18, 35, 30, 17],
  MS: [17, 34, 30, 19],
  MG: [16, 33, 30, 21],
  PA: [19, 35, 30, 16],
  PB: [17, 34, 29, 20],
  PR: [18, 34, 30, 18],
  PE: [19, 35, 29, 17],
  PI: [17, 34, 30, 19],
  RJ: [16, 33, 31, 20],
  RN: [17, 34, 30, 19],
  RS: [18, 35, 29, 18],
  RO: [17, 34, 30, 19],
  RR: [16, 33, 30, 21],
  SC: [18, 34, 30, 18],
  SE: [17, 34, 30, 19],
  SP: [18, 35, 30, 17],
  TO: [17, 34, 30, 19]
};

const dadosEstados = {
  AC: [12, 14, 22, 35, 28, 40],
  AL: [13, 16, 24, 37, 29, 42],
  AP: [10, 12, 20, 32, 25, 38],
  AM: [14, 15, 26, 38, 30, 44],
  BA: [18, 20, 30, 50, 35, 55],
  CE: [16, 18, 28, 45, 33, 50],
  DF: [11, 13, 23, 36, 27, 41],
  ES: [13, 15, 25, 39, 31, 43],
  GO: [14, 16, 27, 40, 32, 45],
  MA: [17, 19, 29, 46, 34, 51],
  MT: [15, 17, 28, 42, 33, 47],
  MS: [14, 16, 26, 41, 30, 46],
  MG: [12, 15, 25, 35, 28, 40],
  PA: [16, 18, 30, 44, 34, 49],
  PB: [13, 14, 24, 38, 29, 42],
  PR: [14, 17, 26, 40, 31, 44],
  PE: [15, 18, 29, 43, 32, 48],
  PI: [13, 15, 25, 37, 30, 43],
  RJ: [10, 12, 28, 40, 32, 45],
  RN: [12, 14, 26, 39, 30, 44],
  RO: [13, 15, 27, 41, 31, 45],
  RR: [11, 13, 24, 36, 28, 40],
  RS: [14, 16, 32, 46, 31, 48],
  SC: [15, 17, 29, 43, 33, 47],
  SE: [12, 14, 25, 38, 29, 42],
  SP: [15, 18, 35, 48, 30, 50],
  TO: [13, 15, 26, 39, 30, 44]
};

  const dadosAlternativos = {
  AC: [36, 31, 27, 26, 30, 22],
  AL: [38, 33, 29, 27, 31, 24],
  AP: [34, 30, 26, 24, 29, 21],
  AM: [37, 32, 28, 26, 30, 23],
  BA: [45, 39, 35, 33, 36, 30],
  CE: [42, 36, 32, 31, 34, 27],
  DF: [35, 31, 27, 25, 29, 22],
  ES: [37, 33, 28, 27, 31, 24],
  GO: [38, 34, 30, 29, 32, 25],
  MA: [43, 38, 33, 31, 35, 28],
  MT: [39, 35, 31, 30, 33, 26],
  MS: [38, 34, 30, 28, 32, 25],
  MG: [38, 34, 29, 27, 29, 24],
  PA: [41, 36, 32, 30, 34, 27],
  PB: [36, 32, 28, 26, 30, 23],
  PR: [37, 33, 29, 28, 31, 25],
  PE: [39, 35, 30, 29, 33, 26],
  PI: [36, 32, 27, 26, 30, 24],
  RJ: [35, 30, 28, 25, 30, 22],
  RN: [36, 31, 28, 27, 29, 23],
  RO: [37, 32, 29, 28, 30, 24],
  RR: [34, 30, 26, 25, 28, 21],
  RS: [42, 36, 32, 30, 34, 28],
  SC: [39, 35, 31, 29, 33, 26],
  SE: [36, 32, 28, 27, 30, 23],
  SP: [40, 35, 30, 28, 32, 25],
  TO: [36, 32, 29, 27, 31, 24]
};

function filtrarPorEstado() {
    const estadoSelecionado = document.getElementById('select-estado').value;
    if (estadoSelecionado) {
        // Atualizar gráfico de sexo
        const novoSexo = dadosSexo[estadoSelecionado];
        graficoSexo.data.datasets[0].data = novoSexo;
        graficoSexo.update();

        // Atualizar gráfico de faixa etária
        const novaFaixa = dadosFaixaEtaria[estadoSelecionado];
        graficoIdade.data.datasets[0].data = novaFaixa;
        graficoIdade.update();

        // Atualizar gráfico de influenciadores
        const novosInfluenciadores = dadosEstados[estadoSelecionado];
        graficoInfluenciadores.data.datasets[0].data = [novosInfluenciadores[0], novosInfluenciadores[1]]; // Exemplo de dados para o primeiro dataset
        graficoInfluenciadores.data.datasets[1].data = [novosInfluenciadores[2], novosInfluenciadores[3]]; // Exemplo de dados para o segundo dataset
        graficoInfluenciadores.data.datasets[2].data = [novosInfluenciadores[4], novosInfluenciadores[5]]; // Exemplo de dados para o terceiro dataset
        graficoInfluenciadores.update();
    }
}

function mostrarAgravantesCombinados() {
    const estadoSelecionado = document.getElementById('select-estado').value;
    if (estadoSelecionado) {
        const novosDados = dadosAlternativos[estadoSelecionado];
        graficoInfluenciadores.data.datasets[0].data = [novosDados[0], novosDados[1]];
        graficoInfluenciadores.data.datasets[1].data = [novosDados[2], novosDados[3]];
        graficoInfluenciadores.data.datasets[2].data = [novosDados[4], novosDados[5]];
        graficoInfluenciadores.update();
    }
}

  </script>
</body>
</html>